#define VLINE_UP LA(LS(UP))
#define VLINE_DOWN LA(LS(DOWN))

#define V_TOP LG(UP)
#define V_BOT LG(DOWN)

// WINDOWS vim section
#define SEARCH_WIN LC(F)

#define WORD_L_WIN LC(LEFT)
#define WORD_R_WIN LC(RIGHT)
#define WORD_L_SEL_WIN LC(LS(LEFT))
#define WORD_R_SEL_WIN LC(LS(RIGHT))

#define DEL_WORD_WIN LC(BSPC)
#define F_LINE_WIN HOME
#define L_LINE_WIN END

#define F_LINE_SEL_WIN LC(LS(HOME))
#define L_LINE_SEL_WIN LC(LS(END))

#define C_COPY_WIN LC(C)
#define PASTE_WIN LC(V)
#define C_CUT_WIN LC(X)
#define C_UNDO_WIN LC(Z)
#define C_REDO_WIN LC(LS(Z))

#define VLINE_UP_WIN LC(LS(UP))
#define VLINE_DOWN_WIN LC(LS(DOWN))

#define V_TOP_WIN LC(HOME)
#define V_BOT_WIN LC(END)
// end WINDOWS vim section

/ {

  macros {
    /omit-if-no-ref/ vim_del: vim_del {
      wait-ms = <0>;
      tap-ms = <0>;
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings = <&macro_press &mo _VIM_PENDING>,
        <&macro_pause_for_release>,
        <&macro_tap &kp DEL>,
        <&macro_release &mo _VIM_PENDING>;
    };

    /omit-if-no-ref/ vim_change: vim_change {
      wait-ms = <0>;
      tap-ms = <0>;
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings = <&macro_press &mo _VIM_PENDING>,
        <&macro_pause_for_release>,
        <&macro_tap &kp DEL>,
        <&macro_release &mo _VIM_PENDING>,
        <&macro_press &to _COLEMAK_DH>;
    };

    /omit-if-no-ref/ vim_copy: vim_copy {
      wait-ms = <0>;
      tap-ms = <0>;
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings = <&macro_press &mo _VIM_PENDING>,
        <&macro_pause_for_release>,
        <&macro_tap &kp C_COPY>,
        <&macro_tap &kp LEFT>,
        <&macro_release &mo _VIM_PENDING>;
    };

    /omit-if-no-ref/ vim_go: vim_go {
      wait-ms = <0>;
      tap-ms = <0>;
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings = <&macro_press &mo _VIM_PENDING>,
        <&macro_pause_for_release>,
        <&macro_release &mo _VIM_PENDING>;
    };

    /omit-if-no-ref/ vim_line_sel: vim_line_sel {
      wait-ms = <0>;
      tap-ms = <0>;
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings = <&macro_tap &kp F_LINE>,
        <&macro_tap &kp L_LINE_SEL>;
    };

    /omit-if-no-ref/ vim_a: vim_a {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp RIGHT> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    };

    /omit-if-no-ref/ vim_a_caps: vim_a_caps {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp L_LINE> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    };

    /omit-if-no-ref/ vim_i_caps: vim_i_caps {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp F_LINE> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    };

    /omit-if-no-ref/ vim_o_caps: vim_o_caps {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp F_LINE> 
      ,<&macro_tap &kp ENTER> 
      ,<&macro_tap &kp UP> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    }

    /omit-if-no-ref/ vim_y_caps: vim_y_caps {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp L_LINE_SEL> 
      ,<&macro_tap &kp C_COPY> 
      ,<&macro_tap &kp LEFT> 
      ;
    }

    /omit-if-no-ref/ vim_del_caps: vim_del_caps {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp L_LINE_SEL> 
      ,<&macro_tap &kp DEL> 
      ;
    }

    /omit-if-no-ref/ vim_visual_caps: vim_visual_caps {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings = <&macro_tap &kp F_LINE>,
        <&macro_tap &kp L_LINE_SEL>,
        <&macro_tap &tog _VIM_VLINE>;
    }

    /omit-if-no-ref/ vim_change_caps: vim_change_caps {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp L_LINE_SEL> 
      ,<&macro_tap &kp DEL> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    }

    /omit-if-no-ref/ vim_r_caps: vim_r_caps {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp INS> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    }

    /omit-if-no-ref/ vim_p_caps: vim_p_caps {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp F_LINE> 
      ,<&macro_tap &kp ENTER> 
      ,<&macro_tap &kp PASTE> 
      ;
    };

    /omit-if-no-ref/ vim_i: vim_i {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &to _COLEMAK_DH> 
      ;
    };

    /omit-if-no-ref/ vim_w: vim_w {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp WORD_R> 
      ,<&macro_tap &kp RIGHT> 
      ;
    };

    /omit-if-no-ref/ vim_p: vim_p {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp PASTE> 
      ;
    };

    /omit-if-no-ref/ vim_o: vim_o {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp ENTER> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    };

    /omit-if-no-ref/ vim_x: vim_x {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp C_CUT>
      ;
    };

    /omit-if-no-ref/ vim_r: vim_r {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp RIGHT> 
      ,<&macro_tap &kp DEL> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    };

    /omit-if-no-ref/ vim_visual: vim_visual {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings = <&macro_tap &tog _VIM_PENDING>,
        <&macro_tap &tog _VIM_VISUAL>;
    };

    /omit-if-no-ref/ vim_y_visual: vim_y_visual {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp C_COPY>,
        <&macro_tap &kp LEFT>,
        <&macro_tap &tog _VIM_PENDING>,
        <&macro_tap &tog _VIM_VISUAL>;
    };

    /omit-if-no-ref/ vim_d_visual: vim_d_visual {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp DEL>,
        <&macro_tap &kp DEL>,
        <&macro_tap &tog _VIM_PENDING>,
        <&macro_tap &tog _VIM_VISUAL>;
    };

    /omit-if-no-ref/ vim_c_visual: vim_c_visual {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp DEL>,
        <&macro_tap &to _COLEMAK_DH>;
    };

    /omit-if-no-ref/ vim_x_visual: vim_x_visual {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp C_CUT>,
        <&macro_tap &tog _VIM_PENDING>,
        <&macro_tap &tog _VIM_VISUAL>;
    };

    /omit-if-no-ref/ vim_v_visual: vim_v_visual {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp LEFT>,
        <&macro_tap &kp RIGHT>,
        <&macro_tap &tog _VIM_PENDING>,
        <&macro_tap &tog _VIM_VISUAL>;
    };

    /omit-if-no-ref/ off_vim_visual: off_vim_visual {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp LEFT>,
        <&macro_tap &kp RIGHT>,
        <&macro_tap &tog _VIM_VISUAL>,
        <&macro_tap &tog _VIM_PENDING>;
    };

    /omit-if-no-ref/ off_vim_vline: off_vim_vline {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp LEFT>,
        <&macro_tap &kp RIGHT>,
        <&macro_tap &tog _VIM_VLINE>;
    };

    /omit-if-no-ref/ vim_y_vline: vim_y_vline {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp C_COPY>,
        <&macro_tap &kp LEFT>,
        <&macro_tap &tog _VIM_VLINE>;
    };

    /omit-if-no-ref/ vim_d_vline: vim_d_vline {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp DEL>,
        <&macro_tap &kp DEL>,
        <&macro_tap &tog _VIM_VLINE>;
    };

    /omit-if-no-ref/ vim_c_vline: vim_c_vline {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp DEL>,
        <&macro_tap &to _COLEMAK_DH>;
    };

    /omit-if-no-ref/ vim_x_vline: vim_x_vline {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp C_CUT>,
        <&macro_tap &tog _VIM_VLINE>;
    };

    // WINDOWS VIM SECTION
    /omit-if-no-ref/ vim_del_win: vim_del_win {
      wait-ms = <0>;
      tap-ms = <0>;
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings = <&macro_press &mo _VIM_PENDING_WIN>,
        <&macro_pause_for_release>,
        <&macro_tap &kp DEL>,
        <&macro_release &mo _VIM_PENDING_WIN>;
    };

    /omit-if-no-ref/ vim_change_win: vim_change_win {
      wait-ms = <0>;
      tap-ms = <0>;
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings = <&macro_press &mo _VIM_PENDING_WIN>,
        <&macro_pause_for_release>,
        <&macro_tap &kp DEL>,
        <&macro_release &mo _VIM_PENDING_WIN>,
        <&macro_press &to _COLEMAK_DH>;
    };

    /omit-if-no-ref/ vim_copy_win: vim_copy_win {
      wait-ms = <0>;
      tap-ms = <0>;
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings = <&macro_press &mo _VIM_PENDING_WIN>,
        <&macro_pause_for_release>,
        <&macro_tap &kp C_COPY_WIN>,
        <&macro_tap &kp LEFT>,
        <&macro_release &mo _VIM_PENDING_WIN>;
    };

    /omit-if-no-ref/ vim_go_win: vim_go_win {
      wait-ms = <0>;
      tap-ms = <0>;
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings = <&macro_press &mo _VIM_PENDING_WIN>,
        <&macro_pause_for_release>,
        <&macro_release &mo _VIM_PENDING_WIN>;
    };

    /omit-if-no-ref/ vim_line_sel_win: vim_line_sel_win {
      wait-ms = <0>;
      tap-ms = <0>;
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings = <&macro_tap &kp F_LINE_WIN>,
        <&macro_tap &kp L_LINE_SEL_WIN>;
    };

    /omit-if-no-ref/ vim_a_win: vim_a_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp RIGHT> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    };

    /omit-if-no-ref/ vim_a_caps_win: vim_a_caps_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp L_LINE_WIN> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    };

    /omit-if-no-ref/ vim_i_caps_win: vim_i_caps_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp F_LINE_WIN> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    };

    /omit-if-no-ref/ vim_o_caps_win: vim_o_caps_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp F_LINE_WIN> 
      ,<&macro_tap &kp ENTER> 
      ,<&macro_tap &kp UP> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    }

    /omit-if-no-ref/ vim_y_caps_win: vim_y_caps_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp L_LINE_SEL_WIN> 
      ,<&macro_tap &kp C_COPY_WIN> 
      ,<&macro_tap &kp LEFT> 
      ;
    }

    /omit-if-no-ref/ vim_del_caps_win: vim_del_caps_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp L_LINE_SEL_WIN> 
      ,<&macro_tap &kp DEL> 
      ;
    }

    /omit-if-no-ref/ vim_visual_caps_win: vim_visual_caps_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings = <&macro_tap &kp F_LINE_WIN>,
        <&macro_tap &kp L_LINE_SEL_WIN>,
        <&macro_tap &tog _VIM_VLINE_WIN>;
    }

    /omit-if-no-ref/ vim_change_caps_win: vim_change_caps_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp L_LINE_SEL_WIN> 
      ,<&macro_tap &kp DEL> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    }

    /omit-if-no-ref/ vim_r_caps_win: vim_r_caps_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp INS> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    }

    /omit-if-no-ref/ vim_p_caps_win: vim_p_caps_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp F_LINE_WIN> 
      ,<&macro_tap &kp ENTER> 
      ,<&macro_tap &kp PASTE_WIN> 
      ;
    };

    /omit-if-no-ref/ vim_i_win: vim_i_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &to _COLEMAK_DH> 
      ;
    };

    /omit-if-no-ref/ vim_w_win: vim_w_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp WORD_R_WIN> 
      ,<&macro_tap &kp RIGHT> 
      ;
    };

    /omit-if-no-ref/ vim_p_win: vim_p_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp PASTE_WIN> 
      ;
    };

    /omit-if-no-ref/ vim_o_win: vim_o_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp ENTER> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    };

    /omit-if-no-ref/ vim_x_win: vim_x_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp C_CUT_WIN>
      ;
    };

    /omit-if-no-ref/ vim_r_win: vim_r_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp RIGHT> 
      ,<&macro_tap &kp DEL> 
      ,<&macro_tap &to _COLEMAK_DH> 
      ;
    };

    /omit-if-no-ref/ vim_visual_win: vim_visual_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings = <&macro_tap &tog _VIM_PENDING_WIN>,
        <&macro_tap &tog _VIM_VISUAL_WIN>;
    };

    /omit-if-no-ref/ vim_y_visual_win: vim_y_visual_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp C_COPY_WIN>,
        <&macro_tap &kp LEFT>,
        <&macro_tap &tog _VIM_PENDING_WIN>,
        <&macro_tap &tog _VIM_VISUAL_WIN>;
    };

    /omit-if-no-ref/ vim_d_visual_win: vim_d_visual_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp DEL>,
        <&macro_tap &kp DEL>,
        <&macro_tap &tog _VIM_PENDING_WIN>,
        <&macro_tap &tog _VIM_VISUAL_WIN>;
    };

    /omit-if-no-ref/ vim_c_visual_win: vim_c_visual_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp DEL>,
        <&macro_tap &to _COLEMAK_DH>;
    };

    /omit-if-no-ref/ vim_x_visual_win: vim_x_visual_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp C_CUT_WIN>,
        <&macro_tap &tog _VIM_PENDING_WIN>,
        <&macro_tap &tog _VIM_VISUAL_WIN>;
    };

    /omit-if-no-ref/ vim_v_visual_win: vim_v_visual_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp LEFT>,
        <&macro_tap &kp RIGHT>,
        <&macro_tap &tog _VIM_PENDING_WIN>,
        <&macro_tap &tog _VIM_VISUAL_WIN>;
    };

    /omit-if-no-ref/ off_vim_visual_win: off_vim_visual_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp LEFT>,
        <&macro_tap &kp RIGHT>,
        <&macro_tap &tog _VIM_VISUAL_WIN>,
        <&macro_tap &tog _VIM_PENDING_WIN>;
    };

    /omit-if-no-ref/ off_vim_vline_win: off_vim_vline_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp LEFT>,
        <&macro_tap &kp RIGHT>,
        <&macro_tap &tog _VIM_VLINE_WIN>;
    };

    /omit-if-no-ref/ vim_y_vline_win: vim_y_vline_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp C_COPY_WIN>,
        <&macro_tap &kp LEFT>,
        <&macro_tap &tog _VIM_VLINE_WIN>;
    };

    /omit-if-no-ref/ vim_d_vline_win: vim_d_vline_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp DEL>,
        <&macro_tap &kp DEL>,
        <&macro_tap &tog _VIM_VLINE_WIN>;
    };

    /omit-if-no-ref/ vim_c_vline_win: vim_c_vline_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp DEL>,
        <&macro_tap &to _COLEMAK_DH>;
    };

    /omit-if-no-ref/ vim_x_vline_win: vim_x_vline_win {
      compatible = "zmk,behavior-macro";
      #binding-cells = <0>;
      bindings 
      = <&macro_tap &kp C_CUT_WIN>,
        <&macro_tap &tog _VIM_VLINE_WIN>;
    };
    // END WINDOWS VIM SECTION

  };
};
